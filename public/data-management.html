<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë””ì§€í„¸ ìœ ì‚° ë°ì´í„° ê´€ë¦¬</title>
    <style>
      body {
        font-family: "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
        background-color: #f8f9fa;
        margin: 0;
        padding: 0;
      }
      .header {
        background-color: white;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .logo {
        font-weight: bold;
        font-size: 20px;
        color: #333;
      }
      .user-info {
        display: flex;
        align-items: center;
      }
      .user-name {
        margin-right: 15px;
        font-weight: 500;
      }
      .logout-button {
        background-color: #f1f3f5;
        border: none;
        border-radius: 4px;
        padding: 8px 12px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.2s;
      }
      .logout-button:hover {
        background-color: #e9ecef;
      }
      .container {
        max-width: 1000px;
        margin: 40px auto;
        padding: 0 20px;
      }
      .back-button {
        background-color: transparent;
        border: none;
        cursor: pointer;
        font-size: 16px;
        color: #666;
        display: flex;
        align-items: center;
        padding: 0;
        margin-bottom: 20px;
      }
      .back-button:hover {
        color: #333;
      }
      .back-icon {
        margin-right: 5px;
      }
      .welcome-card {
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        padding: 30px;
        margin-bottom: 30px;
      }
      h1 {
        color: #333;
        margin-top: 0;
        font-size: 24px;
      }
      .card-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 20px;
        color: #333;
        display: flex;
        align-items: center;
      }
      .card-icon {
        margin-right: 10px;
        font-size: 20px;
      }
      .data-section {
        margin-bottom: 20px;
      }
      .data-section-title {
        font-weight: 600;
        color: #333;
        margin-bottom: 15px;
        font-size: 16px;
      }
      .data-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        border-bottom: 1px solid #e9ecef;
      }
      .data-item:last-child {
        border-bottom: none;
      }
      .data-info {
        flex: 1;
      }
      .data-name {
        font-weight: 500;
        margin-bottom: 5px;
        color: #333;
      }
      .data-description {
        color: #666;
        font-size: 14px;
        line-height: 1.5;
      }
      .data-status {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 500;
        margin-left: 10px;
      }
      .status-pending {
        background-color: #ffe066;
        color: #f59f00;
      }
      .status-no-agent {
        background-color: #ff8787;
        color: #d63031;
      }
      .data-actions {
        display: flex;
        gap: 10px;
      }
      .action-button {
        background-color: #f1f3f5;
        border: none;
        border-radius: 4px;
        padding: 6px 12px;
        font-size: 14px;
        cursor: pointer;
        transition: background-color 0.2s;
      }
      .action-button:hover {
        background-color: #e9ecef;
      }
      .action-button-delete {
        background-color: #e74c3c;
        color: white;
      }
      .action-button-delete:hover {
        background-color: #c0392b;
      }
      .add-button {
        background-color: #4dadf7;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 10px 20px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.2s;
      }
      .add-button:hover {
        opacity: 0.9;
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
      }
      .modal-content {
        background-color: white;
        border-radius: 12px;
        width: 90%;
        max-width: 500px;
        padding: 30px;
        position: relative;
      }
      .modal-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 20px;
        color: #333;
      }
      .modal-form {
        display: flex;
        flex-direction: column;
      }
      .modal-form-group {
        margin-bottom: 15px;
      }
      .modal-form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
        color: #555;
      }
      .modal-form-group input,
      .modal-form-group select {
        width: 100%;
        padding: 10px;
        border: 1px solid #e9ecef;
        border-radius: 4px;
        font-size: 14px;
        box-sizing: border-box;
      }
      .modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 20px;
      }
      .modal-btn {
        padding: 10px 20px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
      }
      .modal-btn-cancel {
        background-color: #f1f3f5;
        color: #333;
      }
      .modal-btn-cancel:hover {
        background-color: #e9ecef;
      }
      .modal-btn-confirm {
        background-color: #4dadf7;
        color: white;
      }
      .modal-btn-confirm:hover {
        opacity: 0.9;
      }
      .close-modal {
        position: absolute;
        top: 15px;
        right: 15px;
        font-size: 24px;
        cursor: pointer;
        color: #999;
      }
      .close-modal:hover {
        color: #333;
      }
      .empty-state {
        text-align: center;
        padding: 40px 0;
        color: #666;
        font-size: 14px;
        line-height: 1.5;
      }
      .empty-icon {
        font-size: 40px;
        margin-bottom: 15px;
        opacity: 0.5;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <div class="logo">ë””ì§€í„¸ ì‚¬í›„ ê´€ë¦¬ ì›¹ì•±</div>
      <div class="user-info">
        <span class="user-name" id="username">ì‚¬ìš©ìëª…</span>
        <button class="logout-button" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    </div>

    <div class="container">
      <button class="back-button" onclick="navigateToHome()">
        <span class="back-icon">â†</span> ëŒì•„ê°€ê¸°
      </button>
      <div class="welcome-card">
        <h1>ë””ì§€í„¸ ìœ ì‚° ë°ì´í„° ê´€ë¦¬</h1>
        <div class="data-section" id="transfer-data-section">
          <h2 class="card-title">
            <span class="card-icon">ğŸ—‚ï¸</span>
            ë°ì´í„° ì „ë‹¬ ì„¤ì •
          </h2>
          <div id="transfer-data-list">
            <div class="empty-state" id="transfer-empty-state">
              <div class="empty-icon">ğŸ”</div>
              <p>ì „ë‹¬í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”.</p>
            </div>
          </div>
          <button class="add-button" onclick="openAddDataModal('transfer')">
            + ë°ì´í„° ì¶”ê°€
          </button>
        </div>
        <div class="data-section" id="delete-data-section">
          <h2 class="card-title">
            <span class="card-icon">ğŸ—‘ï¸</span>
            ë°ì´í„° ì‚­ì œ ì„¤ì •
          </h2>
          <div id="delete-data-list">
            <div class="empty-state" id="delete-empty-state">
              <div class="empty-icon">ğŸ”</div>
              <p>ì‚­ì œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”.</p>
            </div>
          </div>
          <button class="add-button" onclick="openAddDataModal('delete')">
            + ë°ì´í„° ì¶”ê°€
          </button>
        </div>
      </div>
    </div>

    <!-- ë°ì´í„° ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="add-data-modal">
      <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <h2 class="modal-title" id="modal-title">ë°ì´í„° ì¶”ê°€</h2>

        <form class="modal-form" id="add-data-form">
          <div class="modal-form-group">
            <label for="data-type">ë°ì´í„° ìœ í˜•</label>
            <select id="data-type" required onchange="updateSubTypeOptions()">
              <option value="">ìœ í˜• ì„ íƒ</option>
              <option value="sns">SNS ë°ì´í„°</option>
              <option value="email">ì´ë©”ì¼ ë°ì´í„°</option>
              <option value="cloud">í´ë¼ìš°ë“œ ë°ì´í„°</option>
              <option value="other">ê¸°íƒ€ ë°ì´í„°</option>
            </select>
          </div>

          <div class="modal-form-group" id="sub-type-group">
            <label for="sub-type">ì„¸ë¶€ ìœ í˜•</label>
            <select id="sub-type" required>
              <option value="">ì„¸ë¶€ ìœ í˜• ì„ íƒ</option>
            </select>
          </div>

          <div class="modal-form-group">
            <label for="data-name">ë°ì´í„° ì´ë¦„</label>
            <input
              type="text"
              id="data-name"
              placeholder="ë°ì´í„° ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
              required
            />
          </div>

          <div class="modal-form-group">
            <label for="transfer-method">ì „ë‹¬/ì‚­ì œ ë°©ë²•</label>
            <select
              id="transfer-method"
              required
              onchange="toggleAgentSelection()"
            >
              <option value="">ë°©ë²• ì„ íƒ</option>
              <option value="specific-agent">íŠ¹ì • ëŒ€ë¦¬ì¸ì—ê²Œ ì „ë‹¬</option>
              <option value="complete-delete">ì™„ì „ ì‚­ì œ</option>
            </select>
          </div>

          <div
            class="modal-form-group"
            id="agent-selection-group"
            style="display: none"
          >
            <label for="agent-id">ëŒ€ë¦¬ì¸ ì„ íƒ</label>
            <select id="agent-id" required>
              <option value="">ëŒ€ë¦¬ì¸ì„ ì„ íƒí•˜ì„¸ìš”</option>
            </select>
          </div>

          <div class="modal-form-group" id="auto-delete-group">
            <label for="auto-delete">ëŒ€ë¦¬ì¸ ë¯¸ì„¤ì • ì‹œ ìë™ ì‚­ì œ</label>
            <select id="auto-delete" required>
              <option value="yes">ì˜ˆ</option>
              <option value="no">ì•„ë‹ˆìš”</option>
            </select>
          </div>
        </form>

        <div class="modal-actions">
          <button class="modal-btn modal-btn-cancel" onclick="closeModal()">
            ì·¨ì†Œ
          </button>
          <button class="modal-btn modal-btn-confirm" onclick="addData()">
            ì¶”ê°€
          </button>
        </div>
      </div>
    </div>

    <script>
      // ì „ë‹¬/ì‚­ì œ ë°ì´í„° ëª©ë¡
      let transferDataList =
        JSON.parse(localStorage.getItem("transferDataList")) || [];
      let deleteDataList =
        JSON.parse(localStorage.getItem("deleteDataList")) || [];
      let agents = JSON.parse(localStorage.getItem("digitalAgents")) || [];
      let currentModalType = "";
      let currentEditIndex = null;

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° í‘œì‹œ
      document.addEventListener("DOMContentLoaded", function () {
        // ì‚¬ìš©ì ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
        fetch("/api/user-info")
          .then((response) => response.json())
          .then((data) => {
            document.getElementById("username").textContent = data.name;
          })
          .catch((error) => {
            console.error("Error:", error);
            window.location.href = "/auth/login";
          });

        // ë°ì´í„° ëª©ë¡ í‘œì‹œ
        displayDataList("transfer");
        displayDataList("delete");
      });

      // í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
      function navigateToHome() {
        window.location.href = "/home";
      }

      // ë°ì´í„° ëª©ë¡ í‘œì‹œ í•¨ìˆ˜
      function displayDataList(type) {
        const listElement = document.getElementById(`${type}-data-list`);
        const emptyStateElement = document.getElementById(
          `${type}-empty-state`
        );
        const dataList =
          type === "transfer" ? transferDataList : deleteDataList;

        // ê¸°ì¡´ ëª©ë¡ ì´ˆê¸°í™”
        listElement.innerHTML = "";
        listElement.appendChild(emptyStateElement);

        // ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° empty state í‘œì‹œ
        if (dataList.length === 0) {
          emptyStateElement.style.display = "block";
          return;
        }

        // empty state ìˆ¨ê¸°ê¸°
        emptyStateElement.style.display = "none";

        // ë°ì´í„° ëª©ë¡ ìƒì„±
        dataList.forEach((data, index) => {
          const agent = data.agentId
            ? agents.find((a) => a.id === data.agentId)
            : null;
          let statusClass = "status-pending";
          let statusText = "ì‚¬ë§ í™•ì¸ ëŒ€ê¸°ì¤‘";

          if (type === "transfer" && (!agent || !agent.isAuthenticated)) {
            statusClass = "status-no-agent";
            statusText = agent ? "ëŒ€ë¦¬ì¸ ì¸ì¦ í•„ìš”" : "ëŒ€ë¦¬ì¸ ë¯¸ì„¤ì •";
          }

          const dataItem = document.createElement("div");
          dataItem.className = "data-item";
          dataItem.innerHTML = `
          <div class="data-info">
            <div class="data-name">${data.name}
              <span class="data-status ${statusClass}">${statusText}</span>
            </div>
            <div class="data-description">
              ìœ í˜•: ${getDataTypeLabel(data.type, data.subType)} | 
              ë°©ë²•: ${getTransferMethodLabel(data.transferMethod)}
              ${
                agent
                  ? ` | ëŒ€ë¦¬ì¸: ${agent.name} (${agent.email})`
                  : data.autoDelete === "yes"
                  ? " | ëŒ€ë¦¬ì¸ ë¯¸ì„¤ì • ì‹œ ìë™ ì‚­ì œ"
                  : ""
              }
            </div>
          </div>
          <div class="data-actions">
            <button class="action-button" onclick="editData('${type}', ${index})">ìˆ˜ì •</button>
            <button class="action-button action-button-delete" onclick="deleteData('${type}', ${index})">ì‚­ì œ</button>
          </div>
        `;

          listElement.appendChild(dataItem);
        });
      }

      // ë°ì´í„° ìœ í˜• ë ˆì´ë¸” ë°˜í™˜
      function getDataTypeLabel(type, subType) {
        const typeLabels = {
          sns: "SNS ë°ì´í„°",
          email: "ì´ë©”ì¼ ë°ì´í„°",
          cloud: "í´ë¼ìš°ë“œ ë°ì´í„°",
          other: "ê¸°íƒ€ ë°ì´í„°",
        };
        const subTypeLabels = {
          "kakao-profile": "ì¹´ì¹´ì˜¤ í”„ë¡œí•„",
          "kakao-messages": "ì¹´ì¹´ì˜¤ ë©”ì‹œì§€",
          "email-account": "ì´ë©”ì¼ ê³„ì •",
          "cloud-storage": "í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€",
          other: "ê¸°íƒ€",
        };
        return `${typeLabels[type] || type} (${
          subTypeLabels[subType] || subType
        })`;
      }

      // ì „ë‹¬/ì‚­ì œ ë°©ë²• ë ˆì´ë¸” ë°˜í™˜
      function getTransferMethodLabel(method) {
        const labels = {
          "specific-agent": "íŠ¹ì • ëŒ€ë¦¬ì¸ì—ê²Œ ì „ë‹¬",
          "complete-delete": "ì™„ì „ ì‚­ì œ",
        };
        return labels[method] || method;
      }

      // ë°ì´í„° ìœ í˜•ì— ë”°ë¼ ì„¸ë¶€ ìœ í˜• ì˜µì…˜ ì—…ë°ì´íŠ¸
      function updateSubTypeOptions() {
        const dataType = document.getElementById("data-type").value;
        const subTypeSelect = document.getElementById("sub-type");
        subTypeSelect.innerHTML = '<option value="">ì„¸ë¶€ ìœ í˜• ì„ íƒ</option>';

        const subTypes = {
          sns: [
            { value: "kakao-profile", label: "ì¹´ì¹´ì˜¤ í”„ë¡œí•„" },
            { value: "kakao-messages", label: "ì¹´ì¹´ì˜¤ ë©”ì‹œì§€" },
          ],
          email: [{ value: "email-account", label: "ì´ë©”ì¼ ê³„ì •" }],
          cloud: [{ value: "cloud-storage", label: "í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€" }],
          other: [{ value: "other", label: "ê¸°íƒ€" }],
        };

        const options = subTypes[dataType] || [];
        options.forEach((option) => {
          const optionElement = document.createElement("option");
          optionElement.value = option.value;
          optionElement.textContent = option.label;
          subTypeSelect.appendChild(optionElement);
        });
      }

      // ëŒ€ë¦¬ì¸ ì„ íƒ UI í‘œì‹œ/ìˆ¨ê¹€
      function toggleAgentSelection() {
        const transferMethod = document.getElementById("transfer-method").value;
        const agentSelectionGroup = document.getElementById(
          "agent-selection-group"
        );
        const agentSelect = document.getElementById("agent-id");

        if (transferMethod === "specific-agent") {
          agentSelectionGroup.style.display = "block";

          // ëŒ€ë¦¬ì¸ ëª©ë¡ ë¡œë“œ
          agentSelect.innerHTML =
            '<option value="">ëŒ€ë¦¬ì¸ì„ ì„ íƒí•˜ì„¸ìš”</option>';
          agents.forEach((agent) => {
            const option = document.createElement("option");
            option.value = agent.id;
            option.textContent = `${agent.name} (${agent.email})`;
            agentSelect.appendChild(option);
          });
        } else {
          agentSelectionGroup.style.display = "none";
        }
      }

      // ë°ì´í„° ì¶”ê°€ ëª¨ë‹¬ ì—´ê¸°
      function openAddDataModal(type) {
        currentModalType = type;
        currentEditIndex = null;
        const modal = document.getElementById("add-data-modal");
        const modalTitle = document.getElementById("modal-title");

        modalTitle.textContent =
          type === "transfer" ? "ì „ë‹¬í•  ë°ì´í„° ì¶”ê°€" : "ì‚­ì œí•  ë°ì´í„° ì¶”ê°€";

        // í¼ ì´ˆê¸°í™”
        document.getElementById("add-data-form").reset();
        document.getElementById("agent-selection-group").style.display = "none";
        updateSubTypeOptions();

        modal.style.display = "flex";
      }

      // ëª¨ë‹¬ ë‹«ê¸°
      function closeModal() {
        document.getElementById("add-data-modal").style.display = "none";
        currentModalType = "";
        currentEditIndex = null;
      }

      // ë°ì´í„° ì¶”ê°€
      function addData() {
        const dataType = document.getElementById("data-type").value;
        const subType = document.getElementById("sub-type").value;
        const dataName = document.getElementById("data-name").value;
        const transferMethod = document.getElementById("transfer-method").value;
        const agentId = document.getElementById("agent-id").value;
        const autoDelete = document.getElementById("auto-delete").value;

        if (!dataType || !subType || !dataName || !transferMethod) {
          alert("ëª¨ë“  í•„ìˆ˜ í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
          return;
        }

        if (transferMethod === "specific-agent" && !agentId) {
          alert("ëŒ€ë¦¬ì¸ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
          return;
        }

        const newData = {
          type: dataType,
          subType: subType,
          name: dataName,
          transferMethod: transferMethod,
          agentId: transferMethod === "specific-agent" ? agentId : null,
          autoDelete: autoDelete,
        };

        // ë°ì´í„° ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
        if (currentModalType === "transfer") {
          if (currentEditIndex !== null) {
            transferDataList[currentEditIndex] = newData;
          } else {
            transferDataList.push(newData);
          }
          localStorage.setItem(
            "transferDataList",
            JSON.stringify(transferDataList)
          );
          displayDataList("transfer");
        } else {
          if (currentEditIndex !== null) {
            deleteDataList[currentEditIndex] = newData;
          } else {
            deleteDataList.push(newData);
          }
          localStorage.setItem(
            "deleteDataList",
            JSON.stringify(deleteDataList)
          );
          displayDataList("delete");
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        closeModal();
      }

      // ë°ì´í„° ìˆ˜ì •
      function editData(type, index) {
        const dataList =
          type === "transfer" ? transferDataList : deleteDataList;
        const data = dataList[index];

        // ëª¨ë‹¬ ì—´ê¸°
        currentModalType = type;
        currentEditIndex = index;
        const modal = document.getElementById("add-data-modal");
        const modalTitle = document.getElementById("modal-title");

        modalTitle.textContent =
          type === "transfer" ? "ì „ë‹¬í•  ë°ì´í„° ìˆ˜ì •" : "ì‚­ì œí•  ë°ì´í„° ìˆ˜ì •";

        // ê¸°ì¡´ ë°ì´í„°ë¡œ í¼ ì±„ìš°ê¸°
        document.getElementById("data-type").value = data.type;
        updateSubTypeOptions();
        document.getElementById("sub-type").value = data.subType;
        document.getElementById("data-name").value = data.name;
        document.getElementById("transfer-method").value = data.transferMethod;
        toggleAgentSelection();
        if (data.agentId) {
          document.getElementById("agent-id").value = data.agentId;
        }
        document.getElementById("auto-delete").value = data.autoDelete || "no";

        modal.style.display = "flex";
      }

      // ë°ì´í„° ì‚­ì œ
      function deleteData(type, index) {
        if (!confirm("ì •ë§ ì´ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
          return;
        }

        if (type === "transfer") {
          transferDataList.splice(index, 1);
          localStorage.setItem(
            "transferDataList",
            JSON.stringify(transferDataList)
          );
          displayDataList("transfer");
        } else {
          deleteDataList.splice(index, 1);
          localStorage.setItem(
            "deleteDataList",
            JSON.stringify(deleteDataList)
          );
          displayDataList("delete");
        }
      }

      // ë¡œê·¸ì•„ì›ƒ
      function logout() {
        fetch("/auth/logout", { method: "POST" })
          .then(() => {
            window.location.href = "/";
          })
          .catch((error) => {
            console.error("ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜:", error);
            window.location.href = "/";
          });
      }
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'930c200769ffb05d',t:'MTc0NDcyNzI2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'930c71255cac7bcc',t:'MTc0NDczMDU4My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
